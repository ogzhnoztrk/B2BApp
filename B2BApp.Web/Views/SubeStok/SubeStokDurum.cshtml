@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";

}

<div class="container">
    <h2>Sube Stoklar</h2>
    <hr />

   @*   <div class="p-3 border bg-light">

         <canvas id="pieChart" width="618" height="309"></canvas>
     </div> *@
    <br />


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        flatpickr('.datepicker', {
            dateFormat: 'd-m-Y'
        });
    </script>

    <div class="p-3 border bg-light">

        <table id="subeStokTable" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>Şube Adi</th>
                    <th>Ürün</th>
                    <th>Stok</th>

                </tr>
            </thead>
            <tfoot>
            </tfoot>
        </table>
    </div>
</div>





 
<link rel="stylesheet" href="" />
@* select2 kullanımı *@



<script type="text/javascript">
  
    let table;


    function initTable() {
        $.ajax({
            url: 'https://localhost/api/SubeStok/GetAllWithSubeAndUrunByTedarikciId',
            crossDomain: true,
            headers: {
                'accept': 'text/plain',
                'Authorization': "Bearer " + "@ViewBag.JwtCookie"
            },
            data: {
                'tedarikciId': '@ViewBag.FirmaId',
                // 'ilkTarih': '01-01-2000',
                // 'ikinciTarih': '01-01-2000',
                // 'subeId': 'aaa',
                // 'kategoriId': 'aaa',
                // 'firmaId': 'aaa'
            }
        }).done(function (response) {
            table = $('#subeStokTable').DataTable({
                "data": response.data,
                "language": { "url": '//cdn.datatables.net/plug-ins/2.0.8/i18n/tr.json' },

                "layout": {
                    "bottomStart": {
                        "buttons": [
                            {
                                "extend": 'pdfHtml5',
                                "exportOptions": {
                                    "columns": [0, 1, 2],
                                   
                                },
                                "className": "btn btn-success"
                            },
                            
                        ]
                    }

                },
               
                
                "columns": [
                    { "data": 'sube.subeAdi' },
                    { "data": 'urun.urunAdi' },
                    { "data": 'stok', className: 'text-start' },

                ]
            });


        });
    }
    initTable();
    
   

</script>